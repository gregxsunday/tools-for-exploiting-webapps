from bokeh.models.sources import ColumnDataSource
from bokeh.models.glyphs import VBar
from bokeh.models import FactorRange, Range1d, LinearAxis, Grid
from bokeh.palettes import BuPu
from bokeh.plotting import figure


def create_bar_chart(data, title, x_name, y_name, width=1200, height=300):
    source = ColumnDataSource(data)
    xdr = FactorRange(factors=data[x_name])
    ydr = Range1d(start=0, end=max(data[y_name])*1.5)

    plot = figure(title=title, x_range=xdr, y_range=ydr)
    glyph = VBar(x=x_name, top=y_name, bottom=0, width=.8)
    plot.add_glyph(source, glyph)

    xaxis = LinearAxis()
    yaxis = LinearAxis()

    plot.add_layout(Grid(dimension=0, ticker=xaxis.ticker))
    plot.add_layout(Grid(dimension=1, ticker=yaxis.ticker))

    return plot