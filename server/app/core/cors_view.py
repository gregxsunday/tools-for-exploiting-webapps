import sys
from subprocess import call
from flask import Blueprint, request, render_template, Response, flash, g, session, redirect, url_for, \
                  abort, jsonify

mod = Blueprint('cors', __name__)

@mod.route('/cors', methods=['GET'])
def index():
  return (render_template('cors/index.html'))

@mod.route('/run', methods=['POST'])
def run():
    rawText = request.form.get('domain')
    call(["python", "../CORS/CORSScanner/cors_scanner.py"])
    print(rawText, file=sys.stderr)
    return Response(status=200)